{"swagger":"2.0","info":{"version":"v0.1.6","title":"Monopoly Deal API","license":{"url":"https://www.gnu.org/licenses/","name":"GNUv3"},"description":"This is an API for the Monopoly Deal Game"},"paths":{"/api/v1/login":{"post":{"tags":["auth"],"summary":"Authenticate an existing user","consumes":["application/json;charset=utf-8"],"produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"schema":{"$ref":"#/definitions/UserAuth"},"in":"body","name":"body"}],"responses":{"400":{"description":"Invalid `body`"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"type":"object"}}}],"type":"object"},"description":""}}}},"/api/v1/signup":{"post":{"tags":["auth"],"summary":"Create a new user","consumes":["application/json;charset=utf-8"],"produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"schema":{"$ref":"#/definitions/NewUser"},"in":"body","name":"body"}],"responses":{"400":{"description":"Invalid `body`"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"type":"object"}}}],"type":"object"},"description":""}}}},"/api/v1/game":{"get":{"tags":["game"],"summary":"Obtain all open public games","description":"this provides a list of game information similar to the /api/v1/game/{gid} endpoint. It currently gives all available games (paginated). Private games will be implemented later.","produces":["application/json;charset=utf-8"],"parameters":[{"maximum":9223372036854775807,"minimum":-9223372036854775808,"required":false,"in":"query","name":"page","type":"integer","description":"Page offset of entries relative to limit size"},{"maximum":9223372036854775807,"minimum":-9223372036854775808,"required":false,"in":"query","name":"limit","type":"integer","description":"Number of entries to limit to (default 100)"}],"responses":{"400":{"description":"Invalid `limit` or `page`"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"$ref":"#/definitions/Game"}}}],"type":"object"},"description":""}}},"post":{"tags":["game"],"summary":"Create a new game","description":"Creates a game, making the host as the creator of this game. The host may also choose the card deck (game mode) to play from, along with a few other options (not yet fully determined).","consumes":["application/json;charset=utf-8"],"produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"schema":{"$ref":"#/definitions/NewGame"},"in":"body","name":"body","description":"The configurations for the new game. Currently there are only two settings: the name of the game and the card deck (as an ID)."}],"responses":{"400":{"description":"Invalid `body`"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"$ref":"#/definitions/CreatedGame"}}}],"type":"object"},"description":""}}}},"/api/v1/game/{:gid}":{"get":{"tags":["game"],"summary":"Obtain information of a specific game","description":"Similar to /api/v1/game, but only queries information about one specific game. To get more indepth information, use the status endpoint instead","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":":gid","type":"integer","description":"The game ID"}],"responses":{"404":{"description":"`:gid` not found"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"$ref":"#/definitions/Game"}}}],"type":"object"},"description":""}}}},"/api/v1/gspec/{:did}":{"get":{"tags":["game"],"summary":"Obtains the specifications of a card deck","description":"TODO","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":":did","type":"integer","description":"The card deck ID"}],"responses":{"404":{"description":"`:did` not found"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"$ref":"#/definitions/GameSpec"}}}],"type":"object"},"description":""}}}},"/api/v1/game/{:gid}/status":{"get":{"tags":["playing"],"summary":"Obtain more indepth information of a game","description":"This obtains some basic game information such as who's turn it is and which players are in the game.","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":":gid","type":"integer","description":"The game ID"}],"responses":{"404":{"description":"`:gid` not found"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"$ref":"#/definitions/GameStatus"}}}],"type":"object"},"description":""}}}},"/api/v1/game/{:gid}/play":{"get":{"tags":["playing"],"summary":"Obtain the play history of a game","description":"This contains a list of actions played out by you and the other players of this game, where the latest event occurs earlier in the list, i.e. sorted in date-descending order. Each entry contains cards involved in the action, and some specific metadata associated with the action. This endpoint has a pagination feature that limits the total number of history entries seen at any time.","produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":":gid","type":"integer","description":"The game ID"},{"maximum":9223372036854775807,"minimum":-9223372036854775808,"required":false,"in":"query","name":"page","type":"integer","description":"Page offset of entries relative to limit size"},{"maximum":9223372036854775807,"minimum":-9223372036854775808,"required":false,"in":"query","name":"limit","type":"integer","description":"Number of entries to limit to (default 100)"}],"responses":{"404":{"description":"`:gid` not found"},"400":{"description":"Invalid `limit` or `page`"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"$ref":"#/definitions/History"}}}],"type":"object"},"description":""}}},"post":{"tags":["playing"],"summary":"Plays out an action","description":"Use this endpoint to play out a card, whether if it is the player's turn, or to pay another player. Note that this does not include some other assorted instances such as: ending the player's turn, moving a wildcard around, or drawing a card. Those have separate endpoints.","consumes":["application/json;charset=utf-8"],"produces":["application/json;charset=utf-8"],"parameters":[{"required":true,"in":"path","name":":gid","type":"integer","description":"The game ID"},{"required":true,"schema":{"$ref":"#/definitions/NewAction"},"in":"body","name":"body","description":"Pass in the cards to play, as IDs (whether if they are in hand or on field entirely depends on the specifc nature of the action), the specific player target, if any, as an ID, and the action played, passed as an ID. The list of allowed actions per card and in what contexts they are allowed are queried when requesting the game specs."}],"responses":{"404":{"description":"`:gid` not found"},"400":{"description":"Invalid `body`"},"200":{"schema":{"allOf":[{"$ref":"#/definitions/Message"},{"type":"object","properties":{"payload":{"type":"object"}}}],"type":"object"},"description":""}}}}},"definitions":{"Message":{"required":["status","message"],"properties":{"status":{"example":200,"maximum":599,"minimum":0,"type":"integer"},"message":{"type":"string"},"payload":{"type":"object"}},"type":"object"},"UserAuth":{"required":["userName","password"],"properties":{"userName":{"type":"string"},"password":{"type":"string"}},"type":"object"},"NewUser":{"required":["userName","password","email"],"properties":{"userName":{"type":"string"},"password":{"type":"string"},"email":{"type":"string"}},"type":"object"},"Game":{"required":["creator","created","usesDeck","finished","discardSize","drawSize"],"properties":{"creator":{"type":"integer","description":"Player ID"},"created":{"$ref":"#/definitions/UTCTime"},"usesDeck":{"type":"integer","description":"CardDeck ID"},"finished":{"type":"boolean"},"discardSize":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer"},"drawSize":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer"}},"type":"object"},"UTCTime":{"example":"2016-07-22T00:00:00Z","format":"yyyy-mm-ddThh:MM:ssZ","type":"string"},"CreatedGame":{"required":["id","player"],"properties":{"id":{"type":"integer","description":"Game ID"},"player":{"type":"integer","description":"Player ID"}},"type":"object"},"NewGame":{"required":["name","usesDeck"],"properties":{"name":{"type":"string"},"usesDeck":{"type":"integer","description":"CardDeck ID"}},"type":"object"},"GameSpec":{"required":["deckInfo","deckId","idToCards","idToActions","idToColors"],"properties":{"deckInfo":{"$ref":"#/definitions/CardDeck"},"deckId":{"type":"integer","description":"CardDeck ID"},"idToCards":{"additionalProperties":{"$ref":"#/definitions/CardSpecs"},"type":"object"},"idToActions":{"additionalProperties":{"$ref":"#/definitions/AllowedAction"},"type":"object"},"idToColors":{"additionalProperties":{"$ref":"#/definitions/Color"},"type":"object"}},"type":"object"},"CardDeck":{"required":["name","coverImage","unit"],"properties":{"name":{"type":"string"},"coverImage":{"type":"integer","description":"File ID"},"unit":{"type":"string"}},"type":"object"},"CardSpecs":{"required":["desc","type","partOf","sellValue","value","name","image","color","count"],"properties":{"desc":{"type":"string"},"type":{"$ref":"#/definitions/CardType"},"partOf":{"type":"integer","description":"CardDeck ID"},"sellValue":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer"},"value":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer"},"name":{"type":"string"},"image":{"type":"integer","description":"File ID"},"color":{"type":"integer","description":"Color ID"},"count":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer"}},"type":"object"},"CardType":{"type":"string","enum":["action","property","cash"]},"AllowedAction":{"required":["name","desc","type","icon","targetType","ofDeck"],"properties":{"name":{"type":"string"},"desc":{"type":"string"},"type":{"$ref":"#/definitions/ActionType"},"icon":{"type":"integer","description":"File ID"},"targetType":{"$ref":"#/definitions/TargetType"},"ofDeck":{"type":"integer","description":"CardDeck ID"}},"type":"object"},"ActionType":{"type":"string","enum":["payment","refutal","give","playCard"]},"TargetType":{"type":"string","enum":["self","response","global","targeted"]},"Color":{"required":["name","rgbCode","ofDeck"],"properties":{"name":{"type":"string"},"rgbCode":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer"},"ofDeck":{"type":"integer","description":"CardDeck ID"}},"type":"object"},"GameStatus":{"required":["game","players","discard","hand"],"properties":{"game":{"allOf":[{"type":"object","properties":{"id":{"type":"integer","description":"Game ID"}}},{"$ref":"#/definitions/Game"}],"type":"object"},"me":{"type":"integer","description":"Player ID"},"players":{"additionalProperties":{"$ref":"#/definitions/PlayerInfo"},"type":"object"},"discard":{"items":{"$ref":"#/definitions/CardInfo"},"type":"array"},"hand":{"items":{"$ref":"#/definitions/CardInfo"},"type":"array"}},"type":"object"},"PlayerInfo":{"required":["id","stat","handSize","field"],"properties":{"id":{"type":"integer","description":"Player ID"},"stat":{"$ref":"#/definitions/Player"},"handSize":{"maximum":9223372036854775807,"minimum":-9223372036854775808,"type":"integer"},"field":{"items":{"$ref":"#/definitions/CardInfo"},"type":"array"}},"type":"object"},"Player":{"required":["playing","user","turnNum"],"properties":{"playing":{"type":"integer","description":"Game ID"},"user":{"type":"integer","description":"User ID"},"turnNum":{"format":"enum","type":"string","enum":["drawing","paying","none",1,2,3],"description":"the turn number/state that the user is in"}},"type":"object"},"CardInfo":{"required":["id","spec","type","location"],"properties":{"id":{"type":"integer","description":"Card ID"},"spec":{"type":"integer","description":"CardSpecs ID"},"type":{"$ref":"#/definitions/CardType"},"location":{"$ref":"#/definitions/CardLocation"},"ofPropColor":{"type":"integer","description":"Color ID"}},"type":"object"},"CardLocation":{"type":"string","enum":["hand","cashPile","draw","discard","propStack"]},"History":{"items":{"$ref":"#/definitions/HistoryEntry"},"type":"array"},"HistoryEntry":{"required":["id","action","involves"],"properties":{"id":{"type":"integer","description":"Action ID"},"action":{"$ref":"#/definitions/Action"},"involves":{"items":{"$ref":"#/definitions/InvolveInfo"},"type":"array"}},"type":"object"},"Action":{"required":["ofGame","madeAt","type","maker","targets"],"properties":{"ofGame":{"type":"integer","description":"Game ID"},"madeAt":{"$ref":"#/definitions/UTCTime"},"type":{"type":"integer","description":"AllowedAction ID"},"maker":{"type":"integer","description":"Player ID"},"targets":{"type":"integer","description":"Player ID"}},"type":"object"},"InvolveInfo":{"required":["card"],"properties":{"card":{"$ref":"#/definitions/CardInfo"},"toPlayer":{"type":"integer","description":"Player ID"},"toPropColor":{"type":"integer","description":"Color ID"}},"type":"object"},"NewAction":{"required":["action","specs"],"properties":{"action":{"type":"integer","description":"AllowedAction ID"},"specs":{"$ref":"#/definitions/ActionSpec"},"responds":{"type":"integer","description":"Action ID"}},"type":"object"},"ActionSpec":{"properties":{"plays":{"type":"integer","description":"Card ID"},"targets":{"$ref":"#/definitions/Target"},"gives":{"type":"integer","description":"Card ID"},"tag":{"format":"enum","type":"string","enum":["plays","targets","gives"],"description":"Denotes the union type of this object"}},"maxProperties":1,"minProperties":1,"type":"object"},"Target":{"required":["player"],"properties":{"player":{"type":"integer","description":"Player ID"},"prop":{"type":"integer","description":"Card ID"},"set":{"type":"integer","description":"Color ID"}},"type":"object"}},"tags":[{"name":"auth","description":"Authentication of services"},{"name":"game","description":"Accessing and creating games"},{"name":"playing","description":"Playing the game and viewing how the game is"}]}